server {
    listen localhost:8080;
    server_name redir-local.com

    # Base configuration (keep existing)
    location {
        path /
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
    }

    location {
        path /legacy-folder
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/legacy-folder/
    }

    location {
        path /target-folder
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/target-folder/
    }

    # 301
    location {
        path /301-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder
    }

    # 302
    location {
        path /302-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 302:/legacy-folder
    }

    # 303
    location {
        path /303-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 303:/legacy-folder
    }

    # 307
    location {
        path /temp-redirect
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 307:/legacy-folder
    }

    # 308
    location {
        path /perm-redirect
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 308:/legacy-folder
    }

    # Relative path
    location {
        path /relative-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:legacy-folder
    }

    # Semi-relative path
    location {
        path /semi-relative-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder
    }

    # Absolute URL
    location {
        path /absolute-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:http://redir-local.com/legacy-folder
    }

    # Redirect chain
    location {
        path /redirect-chain-1
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/redirect-chain-2
    }

    location {
        path /redirect-chain-2
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder
    }

    # Query string
    location {
        path /query-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder/query-test.html?param=test&another=value
    }

    # Fragment
    location {
        path /fragment-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder/fragment-test.html#section2
    }

    # Special characters
    location {
        path /special chars
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder
    }

    # External
    location {
        path /external
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 302:https://www.42.fr
    }

    # Trailing slash
    location {
        path /no-slash
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder/
    }

    # Port
    location {
        path /port-test
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:http://redir-local.com:8081/legacy-folder
    }

    # Empty target
    location {
        path /empty-target
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:
    }

    # Query in relative path
    location {
        path /relative-query
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 302:legacy-folder?key=value
    }

    # Multiple slashes
    location {
        path /multiple////slashes
        root /workspaces/42_webserv/Webserv/_SystemTests/_Manual/Redirection/
        return 301:/legacy-folder
    }
}